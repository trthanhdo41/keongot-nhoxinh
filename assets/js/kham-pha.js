// Kham Pha Interactive Features
console.log('Kham Pha JS loaded!');

// User Data Management
class UserProgress {
    constructor() {
        this.storageKey = 'keongot_user_progress';
        this.initData();
    }

    initData() {
        if (!localStorage.getItem(this.storageKey)) {
            const defaultData = {
                currentPoints: 0,
                badges: [],
                level: 1,
                completedQuizzes: 0,
                readStories: [],
                weeklyProgress: 0,
                quizScores: [],
                totalStoriesRead: 0,
                totalQuizzesCompleted: 0,
                averageScore: 0,
                lastActivity: new Date().toISOString()
            };
            localStorage.setItem(this.storageKey, JSON.stringify(defaultData));
        }
    }

    getData() {
        return JSON.parse(localStorage.getItem(this.storageKey));
    }

    updateData(updates) {
        const data = this.getData();
        const newData = { ...data, ...updates, lastActivity: new Date().toISOString() };
        localStorage.setItem(this.storageKey, JSON.stringify(newData));
        this.updateUI();
    }

    addPoints(points) {
        const data = this.getData();
        const newPoints = data.currentPoints + points;
        const newLevel = Math.floor(newPoints / 500) + 1;
        this.updateData({ 
            currentPoints: newPoints,
            level: newLevel
        });
    }

    addBadge(badgeId) {
        const data = this.getData();
        if (!data.badges.includes(badgeId)) {
            this.updateData({ 
                badges: [...data.badges, badgeId]
            });
            
            // Add special unlock animation
            this.showBadgeUnlockAnimation(badgeId);
        }
    }
    
    showBadgeUnlockAnimation(badgeId) {
        // Find the badge element
        const badgeElement = document.querySelector(`[data-badge="${badgeId}"]`);
        if (badgeElement) {
            // Add celebration effect
            badgeElement.classList.add('badge-unlock-celebration');
            
            // Create confetti effect
            this.createConfettiEffect(badgeElement);
            
            // Remove celebration class after animation
            setTimeout(() => {
                badgeElement.classList.remove('badge-unlock-celebration');
            }, 3000);
        }
    }
    
    createConfettiEffect(element) {
        const rect = element.getBoundingClientRect();
        const colors = ['#4ECDC4', '#44A08D', '#26D0CE', '#FFD700', '#FF6B6B', '#4ECDC4'];
        
        for (let i = 0; i < 20; i++) {
            const confetti = document.createElement('div');
            confetti.style.position = 'fixed';
            confetti.style.left = rect.left + rect.width / 2 + 'px';
            confetti.style.top = rect.top + rect.height / 2 + 'px';
            confetti.style.width = '8px';
            confetti.style.height = '8px';
            confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
            confetti.style.borderRadius = '50%';
            confetti.style.pointerEvents = 'none';
            confetti.style.zIndex = '9999';
            
            // Random direction and speed
            const angle = Math.random() * 360;
            const velocity = 50 + Math.random() * 100;
            const vx = Math.cos(angle * Math.PI / 180) * velocity;
            const vy = Math.sin(angle * Math.PI / 180) * velocity;
            
            document.body.appendChild(confetti);
            
            // Animate confetti
            let x = 0, y = 0;
            const animate = () => {
                x += vx * 0.02;
                y += vy * 0.02 + 0.5; // gravity
                confetti.style.transform = `translate(${x}px, ${y}px)`;
                confetti.style.opacity = 1 - (y / 200);
                
                if (y < 200 && confetti.style.opacity > 0) {
                    requestAnimationFrame(animate);
                } else {
                    confetti.remove();
                }
            };
            
            requestAnimationFrame(animate);
        }
    }

    completeQuiz(score) {
        const data = this.getData();
        const newScores = [...data.quizScores, score];
        const averageScore = newScores.reduce((a, b) => a + b, 0) / newScores.length;
        
        // Check for emotion expert badge BEFORE updating totalQuizzesCompleted
        if (data.totalQuizzesCompleted === 0 && score >= 70) {
            this.addBadge('emotion_expert');
        }
        
        this.updateData({
            completedQuizzes: data.completedQuizzes + 1,
            totalQuizzesCompleted: data.totalQuizzesCompleted + 1,
            quizScores: newScores,
            averageScore: Math.round(averageScore * 10) / 10
        });

        // Add points based on score
        const points = Math.round(score * 20);
        this.addPoints(points);

        // Check for badge achievements
        
        if (data.totalQuizzesCompleted + 1 >= 5) {
            this.addBadge('quiz_master');
        }
        
        // Check for explorer badge (complete all activities)
        if (data.totalStoriesRead >= 6 && data.totalQuizzesCompleted + 1 >= 5) {
            this.addBadge('explorer');
        }
    }

    readStory(storyId) {
        const data = this.getData();
        if (!data.readStories.includes(storyId)) {
            this.updateData({
                readStories: [...data.readStories, storyId],
                totalStoriesRead: data.totalStoriesRead + 1
            });

            // Add points for reading story
            this.addPoints(50);

            // Check for badge achievements
            if (data.totalStoriesRead + 1 >= 6) {
                this.addBadge('bookworm');
            }
            
            // Check for storyteller badge (read all stories and complete quizzes)
            if (data.totalStoriesRead >= 6 && data.totalQuizzesCompleted >= 3) {
                this.addBadge('storyteller');
            }
            
            // Check for helper badge (help others by sharing progress)
            if (data.totalStoriesRead >= 4 && data.totalQuizzesCompleted >= 2) {
                this.addBadge('helper');
            }
        }
    }

    updateUI() {
        const data = this.getData();
        
        // Update points display
        const pointsElement = document.getElementById('currentPoints');
        if (pointsElement) {
            pointsElement.textContent = data.currentPoints.toLocaleString();
        }

        // Update level display
        const levelElement = document.getElementById('currentLevel');
        if (levelElement) {
            levelElement.textContent = `Cáº¥p ${data.level}`;
        }

        // Update badge count
        const badgeElement = document.getElementById('badgeCount');
        if (badgeElement) {
            badgeElement.textContent = `${data.badges.length}/6`;
        }

        // Update progress stats in the progress section
        const storyProgress = document.querySelector('.progress-item:nth-child(1) .progress-value');
        if (storyProgress) {
            storyProgress.textContent = `${data.totalStoriesRead}/6`;
        }

        const quizProgress = document.querySelector('.progress-item:nth-child(2) .progress-value');
        if (quizProgress) {
            quizProgress.textContent = `${data.totalQuizzesCompleted}/5`;
        }

        const avgScore = document.querySelector('.progress-item:nth-child(3) .progress-value');
        if (avgScore) {
            avgScore.textContent = `${data.averageScore}/10`;
        }

        // Update weekly progress
        const weeklyProgress = Math.min((data.totalStoriesRead + data.totalQuizzesCompleted) * 15, 100);
        
        // Update circular progress ring
        const progressCircle = document.querySelector('.progress-ring-circle');
        if (progressCircle) {
            const circumference = 2 * Math.PI * 50; // radius = 50
            const offset = circumference - (weeklyProgress / 100) * circumference;
            progressCircle.style.strokeDashoffset = offset;
        }

        // Update progress text
        const progressPercentage = document.querySelector('.progress-ring-percentage');
        if (progressPercentage) {
            progressPercentage.textContent = weeklyProgress + '%';
        }

        // Animate progress chart
        this.animateProgressChart(weeklyProgress);

        // Update badge display
        this.updateBadgeDisplay(data.badges);
    }

    updateBadgeDisplay(earnedBadges) {
        const badgeItems = document.querySelectorAll('.badge-item');
        const badgeIcons = [
            'fas fa-bullseye',
            'fas fa-book', 
            'fas fa-heart',
            'fas fa-pen-fancy',
            'fas fa-hands-helping',
            'fas fa-search'
        ];
        
        badgeItems.forEach((item, index) => {
            const badgeIds = ['quiz_master', 'bookworm', 'emotion_expert', 'storyteller', 'helper', 'explorer'];
            const badgeId = badgeIds[index];
            
            if (earnedBadges.includes(badgeId)) {
                item.classList.remove('locked');
                item.classList.add('earned');
                item.setAttribute('data-badge', badgeId);
                const icon = item.querySelector('.badge-icon i');
                if (icon) {
                    icon.className = badgeIcons[index];
                }
            } else {
                item.classList.add('locked');
                item.classList.remove('earned');
                item.removeAttribute('data-badge');
                const icon = item.querySelector('.badge-icon i');
                if (icon) {
                    icon.className = 'fas fa-lock';
                }
            }
        });
    }
    
    animateProgressChart(percentage) {
        const chartFill = document.getElementById('chartFill');
        const chartPercentage = document.getElementById('chartPercentage');
        const milestones = document.querySelectorAll('.milestone');
        
        if (!chartFill || !chartPercentage) return;
        
        // Reset to 0
        chartFill.style.width = '0%';
        chartPercentage.textContent = '0%';
        
        // Animate to target percentage
        setTimeout(() => {
            chartFill.style.width = `${percentage}%`;
            chartPercentage.textContent = `${percentage}%`;
            
            // Add bounce animation to percentage
            chartPercentage.classList.add('animate');
            setTimeout(() => {
                chartPercentage.classList.remove('animate');
            }, 600);
            
            // Activate milestones based on percentage
            milestones.forEach(milestone => {
                const milestonePercent = parseInt(milestone.dataset.percent);
                if (percentage >= milestonePercent) {
                    milestone.classList.add('active');
                } else {
                    milestone.classList.remove('active');
                }
            });
            
            // Add sparkles if 100%
            if (percentage >= 100) {
                this.addSparkles();
            }
        }, 100);
    }
    
    addSparkles() {
        const sparklesContainer = document.getElementById('chartSparkles');
        if (!sparklesContainer) return;
        
        // Create multiple sparkles
        for (let i = 0; i < 5; i++) {
            const sparkle = document.createElement('div');
            sparkle.innerHTML = 'â¨';
            sparkle.style.position = 'absolute';
            sparkle.style.fontSize = '14px';
            sparkle.style.left = Math.random() * 100 + '%';
            sparkle.style.top = Math.random() * 20 + 'px';
            sparkle.style.animation = `sparkle 1.5s infinite`;
            sparkle.style.animationDelay = Math.random() * 1 + 's';
            sparkle.style.pointerEvents = 'none';
            
            sparklesContainer.appendChild(sparkle);
            
            // Remove sparkle after animation
            setTimeout(() => {
                if (sparkle.parentNode) {
                    sparkle.parentNode.removeChild(sparkle);
                }
            }, 3000);
        }
    }
}

// Initialize user progress
const userProgress = new UserProgress();

// Quiz System - Split into smaller quizzes
const QUIZ_SIZE = 10; // 10 questions per quiz
const quizData = [
    {
        question: "Khi báº¡n cáº£m tháº¥y buá»n, báº¡n thÆ°á»ng lÃ m gÃ¬?",
        options: [
            "KhÃ³c vÃ  chia sáº» vá»i ngÆ°á»i thÃ¢n",
            "Nghe nháº¡c buá»n vÃ  á» má»t mÃ¬nh", 
            "TÃ¬m cÃ¡ch lÃ m viá»c khÃ¡c Äá» quÃªn Äi",
            "Váº½ tranh hoáº·c viáº¿t nháº­t kÃ½"
        ],
        correct: 0,
        explanation: "Chia sáº» cáº£m xÃºc vá»i ngÆ°á»i thÃ¢n lÃ  cÃ¡ch tá»t Äá» xá»­ lÃ½ cáº£m xÃºc buá»n má»t cÃ¡ch lÃ nh máº¡nh."
    },
    {
        question: "Cáº£m xÃºc nÃ o giÃºp báº¡n há»c táº­p tá»t nháº¥t?",
        options: [
            "Vui váº» vÃ  há»©ng thÃº",
            "Lo láº¯ng vÃ  cÄng tháº³ng",
            "Buá»n bÃ£ vÃ  chÃ¡n náº£n",
            "Tá»©c giáº­n vÃ  bá»±c bá»i"
        ],
        correct: 0,
        explanation: "Khi vui váº» vÃ  há»©ng thÃº, nÃ£o bá» hoáº¡t Äá»ng tá»t nháº¥t vÃ  báº¡n sáº½ há»c hiá»u quáº£ hÆ¡n."
    },
    {
        question: "Khi báº¡n tá»©c giáº­n, Äiá»u gÃ¬ nÃªn lÃ m trÆ°á»c tiÃªn?",
        options: [
            "HÃ­t thá» sÃ¢u vÃ  Äáº¿m Äáº¿n 10",
            "NÃ³i ngay nhá»¯ng gÃ¬ báº¡n nghÄ©",
            "ÄÃ¡nh gá»i hoáº·c ÄÃ¡ Äá» váº­t",
            "Im láº·ng vÃ  giá»¯ trong lÃ²ng"
        ],
        correct: 0,
        explanation: "HÃ­t thá» sÃ¢u giÃºp báº¡n bÃ¬nh tÄ©nh vÃ  suy nghÄ© rÃµ rÃ ng hÆ¡n trÆ°á»c khi hÃ nh Äá»ng."
    },
    {
        question: "Cáº£m xÃºc nÃ o lÃ  bÃ¬nh thÆ°á»ng vÃ  cáº§n thiáº¿t?",
        options: [
            "Táº¥t cáº£ cáº£m xÃºc Äá»u bÃ¬nh thÆ°á»ng",
            "Chá» cÃ³ vui vÃ  buá»n",
            "Chá» cÃ³ vui, khÃ´ng nÃªn cÃ³ cáº£m xÃºc khÃ¡c",
            "Cáº£m xÃºc lÃ  dáº¥u hiá»u cá»§a yáº¿u Äuá»i"
        ],
        correct: 0,
        explanation: "Táº¥t cáº£ cáº£m xÃºc Äá»u lÃ  pháº£n á»©ng bÃ¬nh thÆ°á»ng vÃ  cáº§n thiáº¿t cá»§a con ngÆ°á»i."
    },
    {
        question: "Khi báº¡n tháº¥y báº¡n bÃ¨ buá»n, báº¡n nÃªn lÃ m gÃ¬?",
        options: [
            "Láº¯ng nghe vÃ  há»i thÄm",
            "Bá» qua vÃ¬ khÃ´ng liÃªn quan",
            "Cháº¿ giá»u vÃ  trÃªu chá»c",
            "Báº¯t báº¡n pháº£i vui lÃªn ngay"
        ],
        correct: 0,
        explanation: "Láº¯ng nghe vÃ  há»i thÄm lÃ  cÃ¡ch tá»t nháº¥t Äá» há» trá»£ báº¡n bÃ¨ khi há» buá»n."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y lo láº¯ng trÆ°á»c ká»³ thi, báº¡n nÃªn:",
        options: [
            "Bá» há»c vÃ  chÆ¡i game",
            "Chuáº©n bá» ká»¹ lÆ°á»¡ng vÃ  thá» sÃ¢u",
            "Lo láº¯ng suá»t ÄÃªm khÃ´ng ngá»§",
            "Nhá» ngÆ°á»i khÃ¡c lÃ m bÃ i giÃºp"
        ],
        correct: 1,
        explanation: "Chuáº©n bá» ká»¹ lÆ°á»¡ng giÃºp báº¡n tá»± tin hÆ¡n, vÃ  thá» sÃ¢u giÃºp giáº£m lo láº¯ng. ÄÃ¢y lÃ  cÃ¡ch tÃ­ch cá»±c Äá» Äá»i máº·t vá»i Ã¡p lá»±c thi cá»­."
    },
    {
        question: "Cáº£m xÃºc 'ghen tá»' cÃ³ nghÄ©a lÃ  gÃ¬?",
        options: [
            "Vui váº» khi báº¡n bÃ¨ thÃ nh cÃ´ng",
            "Buá»n khi mÃ¬nh khÃ´ng báº±ng báº¡n",
            "Tá»©c giáº­n khi bá» Äá»i xá»­ khÃ´ng cÃ´ng báº±ng",
            "Sá»£ hÃ£i khi gáº·p ngÆ°á»i láº¡"
        ],
        correct: 1,
        explanation: "Ghen tá» lÃ  cáº£m xÃºc buá»n khi mÃ¬nh khÃ´ng báº±ng ngÆ°á»i khÃ¡c. ÄÃ¢y lÃ  cáº£m xÃºc bÃ¬nh thÆ°á»ng, nhÆ°ng cáº§n há»c cÃ¡ch chuyá»n hÃ³a thÃ nh Äá»ng lá»±c tÃ­ch cá»±c."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y tá»± hÃ o vá» thÃ nh tÃ­ch cá»§a mÃ¬nh, báº¡n nÃªn:",
        options: [
            "Khoe khoang vá»i má»i ngÆ°á»i",
            "Chia sáº» niá»m vui má»t cÃ¡ch khiÃªm tá»n",
            "Giáº¥u kÃ­n khÃ´ng cho ai biáº¿t",
            "Cáº£m tháº¥y xáº¥u há» vá» thÃ nh tÃ­ch"
        ],
        correct: 1,
        explanation: "Chia sáº» niá»m vui má»t cÃ¡ch khiÃªm tá»n lÃ  cÃ¡ch tá»t nháº¥t. Äiá»u nÃ y giÃºp báº¡n cáº£m tháº¥y háº¡nh phÃºc mÃ  khÃ´ng lÃ m ngÆ°á»i khÃ¡c khÃ³ chá»u."
    },
    {
        question: "Cáº£m xÃºc 'biáº¿t Æ¡n' giÃºp báº¡n nhÆ° tháº¿ nÃ o?",
        options: [
            "LÃ m báº¡n cáº£m tháº¥y buá»n bÃ£",
            "GiÃºp báº¡n cáº£m tháº¥y háº¡nh phÃºc vÃ  tÃ­ch cá»±c",
            "LÃ m báº¡n cáº£m tháº¥y lo láº¯ng",
            "Khiáº¿n báº¡n cáº£m tháº¥y tá»©c giáº­n"
        ],
        correct: 1,
        explanation: "Cáº£m xÃºc biáº¿t Æ¡n giÃºp báº¡n nháº­n ra nhá»¯ng Äiá»u tá»t Äáº¹p trong cuá»c sá»ng, tá»« ÄÃ³ cáº£m tháº¥y háº¡nh phÃºc vÃ  tÃ­ch cá»±c hÆ¡n."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y cÄng tháº³ng, cÃ¡ch nÃ o giÃºp báº¡n thÆ° giÃ£n?",
        options: [
            "Xem TV cáº£ ngÃ y",
            "HÃ­t thá» sÃ¢u vÃ  nghe nháº¡c nháº¹",
            "Än nhiá»u Äá» ngá»t",
            "ChÆ¡i game liÃªn tá»¥c"
        ],
        correct: 1,
        explanation: "HÃ­t thá» sÃ¢u vÃ  nghe nháº¡c nháº¹ giÃºp cÆ¡ thá» vÃ  tÃ¢m trÃ­ thÆ° giÃ£n, giáº£m cÄng tháº³ng má»t cÃ¡ch tá»± nhiÃªn."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y tháº¥t vá»ng, báº¡n nÃªn:",
        options: [
            "Bá» cuá»c ngay láº­p tá»©c",
            "NghÄ© vá» nhá»¯ng thÃ nh cÃ´ng trÆ°á»c ÄÃ³",
            "Äá» lá»i cho ngÆ°á»i khÃ¡c",
            "TrÃ¡nh nÃ© má»i thá»©"
        ],
        correct: 1,
        explanation: "NghÄ© vá» nhá»¯ng thÃ nh cÃ´ng trÆ°á»c ÄÃ³ giÃºp báº¡n láº¥y láº¡i tá»± tin vÃ  Äá»ng lá»±c Äá» tiáº¿p tá»¥c cá» gáº¯ng."
    },
    {
        question: "CÃ¡ch nÃ o giÃºp báº¡n kiá»m soÃ¡t cáº£m xÃºc tá»t nháº¥t?",
        options: [
            "Giáº¥u kÃ­n má»i cáº£m xÃºc",
            "Nháº­n biáº¿t vÃ  cháº¥p nháº­n cáº£m xÃºc",
            "Bá» qua cáº£m xÃºc",
            "Thá» hiá»n cáº£m xÃºc máº¡nh máº½"
        ],
        correct: 1,
        explanation: "Nháº­n biáº¿t vÃ  cháº¥p nháº­n cáº£m xÃºc lÃ  bÆ°á»c Äáº§u tiÃªn Äá» há»c cÃ¡ch quáº£n lÃ½ chÃºng má»t cÃ¡ch tÃ­ch cá»±c."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y bá» hiá»u láº§m, báº¡n nÃªn:",
        options: [
            "Tá»©c giáº­n vÃ  khÃ´ng nÃ³i gÃ¬",
            "BÃ¬nh tÄ©nh giáº£i thÃ­ch rÃµ rÃ ng",
            "TrÃ¡nh nÃ© ngÆ°á»i ÄÃ³",
            "La hÃ©t Äá» chá»©ng minh mÃ¬nh ÄÃºng"
        ],
        correct: 1,
        explanation: "BÃ¬nh tÄ©nh giáº£i thÃ­ch rÃµ rÃ ng giÃºp ngÆ°á»i khÃ¡c hiá»u báº¡n hÆ¡n vÃ  trÃ¡nh xung Äá»t khÃ´ng cáº§n thiáº¿t."
    },
    {
        question: "Cáº£m xÃºc 'xáº¥u há»' thÆ°á»ng xuáº¥t hiá»n khi nÃ o?",
        options: [
            "Khi báº¡n thÃ nh cÃ´ng",
            "Khi báº¡n máº¯c lá»i trÆ°á»c máº·t ngÆ°á»i khÃ¡c",
            "Khi báº¡n giÃºp Äá»¡ ngÆ°á»i khÃ¡c",
            "Khi báº¡n há»c táº­p tá»t"
        ],
        correct: 1,
        explanation: "Cáº£m xÃºc xáº¥u há» thÆ°á»ng xuáº¥t hiá»n khi chÃºng ta máº¯c lá»i hoáº·c lÃ m Äiá»u gÃ¬ ÄÃ³ khÃ´ng ÄÃºng trÆ°á»c máº·t ngÆ°á»i khÃ¡c."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y ghen tá» vá»i báº¡n bÃ¨, báº¡n nÃªn:",
        options: [
            "Cá» gáº¯ng lÃ m háº¡i báº¡n",
            "Há»c há»i tá»« thÃ nh cÃ´ng cá»§a báº¡n",
            "TrÃ¡nh nÃ© báº¡n ÄÃ³",
            "NÃ³i xáº¥u báº¡n vá»i ngÆ°á»i khÃ¡c"
        ],
        correct: 1,
        explanation: "Há»c há»i tá»« thÃ nh cÃ´ng cá»§a báº¡n lÃ  cÃ¡ch tÃ­ch cá»±c Äá» chuyá»n hÃ³a cáº£m xÃºc ghen tá» thÃ nh Äá»ng lá»±c phÃ¡t triá»n báº£n thÃ¢n."
    },
    {
        question: "Cáº£m xÃºc 'tá»± tin' giÃºp báº¡n nhÆ° tháº¿ nÃ o?",
        options: [
            "LÃ m báº¡n kiÃªu ngáº¡o",
            "GiÃºp báº¡n dá» dÃ ng Äá»i máº·t vá»i thá»­ thÃ¡ch",
            "Khiáº¿n báº¡n khÃ´ng cáº§n há»c há»i",
            "LÃ m báº¡n xa lÃ¡nh báº¡n bÃ¨"
        ],
        correct: 1,
        explanation: "Cáº£m xÃºc tá»± tin giÃºp báº¡n dá» dÃ ng Äá»i máº·t vá»i thá»­ thÃ¡ch vÃ  khÃ´ng sá»£ hÃ£i khi thá»­ nhá»¯ng Äiá»u má»i."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y cÃ´ ÄÆ¡n, báº¡n nÃªn:",
        options: [
            "á» má»t mÃ¬nh mÃ£i mÃ£i",
            "TÃ¬m cÃ¡ch káº¿t ná»i vá»i ngÆ°á»i khÃ¡c",
            "Xem TV cáº£ ngÃ y",
            "ChÆ¡i game liÃªn tá»¥c"
        ],
        correct: 1,
        explanation: "TÃ¬m cÃ¡ch káº¿t ná»i vá»i ngÆ°á»i khÃ¡c giÃºp báº¡n vÆ°á»£t qua cáº£m giÃ¡c cÃ´ ÄÆ¡n vÃ  xÃ¢y dá»±ng nhá»¯ng má»i quan há» tÃ­ch cá»±c."
    },
    {
        question: "Cáº£m xÃºc 'tháº¥t vá»ng' cÃ³ thá» chuyá»n hÃ³a thÃ nh gÃ¬?",
        options: [
            "Tá»©c giáº­n vÃ  háº­n thÃ¹",
            "Äá»ng lá»±c Äá» cá» gáº¯ng hÆ¡n",
            "Buá»n bÃ£ vÃ  chÃ¡n náº£n",
            "Sá»£ hÃ£i vÃ  trÃ¡nh nÃ©"
        ],
        correct: 1,
        explanation: "Cáº£m xÃºc tháº¥t vá»ng cÃ³ thá» chuyá»n hÃ³a thÃ nh Äá»ng lá»±c Äá» cá» gáº¯ng hÆ¡n vÃ  há»c há»i tá»« nhá»¯ng sai láº§m."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y háº¡nh phÃºc, báº¡n nÃªn:",
        options: [
            "Giáº¥u kÃ­n khÃ´ng cho ai biáº¿t",
            "Chia sáº» niá»m vui vá»i ngÆ°á»i thÃ¢n",
            "Khoe khoang vá»i má»i ngÆ°á»i",
            "Cáº£m tháº¥y xáº¥u há»"
        ],
        correct: 1,
        explanation: "Chia sáº» niá»m vui vá»i ngÆ°á»i thÃ¢n giÃºp báº¡n cáº£m tháº¥y háº¡nh phÃºc hÆ¡n vÃ  lan tá»a nÄng lÆ°á»£ng tÃ­ch cá»±c."
    },
    {
        question: "Khi báº¡n khÃ´ng hiá»u bÃ i há»c, báº¡n cáº£m tháº¥y gÃ¬?",
        options: [
            "Tá»©c giáº­n vá»i giÃ¡o viÃªn",
            "Tháº¥t vá»ng vÃ  muá»n bá» cuá»c",
            "Lo láº¯ng nhÆ°ng muá»n tÃ¬m hiá»u thÃªm",
            "Buá»n bÃ£ vÃ  khÃ³c"
        ],
        correct: 2,
        explanation: "Cáº£m tháº¥y lo láº¯ng nhÆ°ng muá»n tÃ¬m hiá»u thÃªm lÃ  pháº£n á»©ng tÃ­ch cá»±c, giÃºp báº¡n cÃ³ Äá»ng lá»±c Äá» há»c há»i."
    },
    {
        question: "Khi báº¡n ÄÆ°á»£c Äiá»m cao, báº¡n nÃªn:",
        options: [
            "Khoe khoang vá»i má»i ngÆ°á»i",
            "Tá»± hÃ o vÃ  tiáº¿p tá»¥c cá» gáº¯ng",
            "Cáº£m tháº¥y xáº¥u há»",
            "Giáº¥u kÃ­n khÃ´ng cho ai biáº¿t"
        ],
        correct: 1,
        explanation: "Tá»± hÃ o vá» thÃ nh tÃ­ch vÃ  tiáº¿p tá»¥c cá» gáº¯ng lÃ  cÃ¡ch tÃ­ch cá»±c Äá» duy trÃ¬ Äá»ng lá»±c há»c táº­p."
    },
    {
        question: "Khi báº¡n bá» Äiá»m kÃ©m, báº¡n nÃªn:",
        options: [
            "Tá»©c giáº­n vÃ  Äá» lá»i cho giÃ¡o viÃªn",
            "Buá»n bÃ£ vÃ  bá» cuá»c",
            "Tháº¥t vá»ng nhÆ°ng tÃ¬m cÃ¡ch cáº£i thiá»n",
            "Giáº¥u kÃ­n khÃ´ng cho ai biáº¿t"
        ],
        correct: 2,
        explanation: "Tháº¥t vá»ng nhÆ°ng tÃ¬m cÃ¡ch cáº£i thiá»n lÃ  pháº£n á»©ng tÃ­ch cá»±c, giÃºp báº¡n há»c há»i tá»« sai láº§m vÃ  tiáº¿n bá»."
    },
    {
        question: "Cáº£m xÃºc nÃ o giÃºp báº¡n táº­p trung há»c táº­p tá»t nháº¥t?",
        options: [
            "Lo láº¯ng vÃ  cÄng tháº³ng",
            "BÃ¬nh tÄ©nh vÃ  táº­p trung",
            "Tá»©c giáº­n vÃ  bá»±c bá»i",
            "Buá»n bÃ£ vÃ  chÃ¡n náº£n"
        ],
        correct: 1,
        explanation: "BÃ¬nh tÄ©nh vÃ  táº­p trung giÃºp nÃ£o bá» hoáº¡t Äá»ng tá»t nháº¥t, giÃºp báº¡n tiáº¿p thu kiáº¿n thá»©c hiá»u quáº£."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y Ã¡p lá»±c thi cá»­, báº¡n nÃªn:",
        options: [
            "Bá» há»c vÃ  chÆ¡i game",
            "Thá» sÃ¢u vÃ  láº­p káº¿ hoáº¡ch há»c táº­p",
            "Lo láº¯ng suá»t ÄÃªm",
            "Nhá» ngÆ°á»i khÃ¡c lÃ m bÃ i giÃºp"
        ],
        correct: 1,
        explanation: "Thá» sÃ¢u vÃ  láº­p káº¿ hoáº¡ch há»c táº­p giÃºp báº¡n giáº£m Ã¡p lá»±c vÃ  cÃ³ phÆ°Æ¡ng hÆ°á»ng rÃµ rÃ ng Äá» chuáº©n bá» thi."
    },
    {
        question: "Khi báº¡n khÃ´ng hiá»u bÃ i cá»§a báº¡n bÃ¨, báº¡n nÃªn:",
        options: [
            "Cáº£m tháº¥y xáº¥u há» vÃ  khÃ´ng há»i",
            "Há»i báº¡n Äá» há»c há»i thÃªm",
            "Tá»©c giáº­n vÃ¬ mÃ¬nh kÃ©m hÆ¡n",
            "TrÃ¡nh nÃ© báº¡n ÄÃ³"
        ],
        correct: 1,
        explanation: "Há»i báº¡n Äá» há»c há»i thÃªm lÃ  cÃ¡ch tÃ­ch cá»±c Äá» cáº£i thiá»n kiáº¿n thá»©c vÃ  xÃ¢y dá»±ng tÃ¬nh báº¡n."
    },
    {
        question: "Cáº£m xÃºc 'tÃ² mÃ²' giÃºp báº¡n nhÆ° tháº¿ nÃ o trong há»c táº­p?",
        options: [
            "LÃ m báº¡n máº¥t táº­p trung",
            "GiÃºp báº¡n muá»n tÃ¬m hiá»u thÃªm",
            "Khiáº¿n báº¡n lo láº¯ng",
            "LÃ m báº¡n cáº£m tháº¥y má»t má»i"
        ],
        correct: 1,
        explanation: "Cáº£m xÃºc tÃ² mÃ² giÃºp báº¡n muá»n tÃ¬m hiá»u thÃªm, tá»« ÄÃ³ há»c há»i ÄÆ°á»£c nhiá»u kiáº¿n thá»©c má»i."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y chÃ¡n náº£n vá»i mÃ´n há»c, báº¡n nÃªn:",
        options: [
            "Bá» há»c mÃ´n ÄÃ³",
            "TÃ¬m cÃ¡ch lÃ m cho mÃ´n há»c thÃº vá» hÆ¡n",
            "Äá» lá»i cho giÃ¡o viÃªn",
            "Chá» há»c khi bá» Ã©p buá»c"
        ],
        correct: 1,
        explanation: "TÃ¬m cÃ¡ch lÃ m cho mÃ´n há»c thÃº vá» hÆ¡n giÃºp báº¡n tÃ¬m láº¡i há»©ng thÃº vÃ  Äá»ng lá»±c há»c táº­p."
    },
    {
        question: "Cáº£m xÃºc 'tá»± hÃ o' khi hoÃ n thÃ nh bÃ i táº­p giÃºp báº¡n:",
        options: [
            "Trá» nÃªn kiÃªu ngáº¡o",
            "CÃ³ Äá»ng lá»±c Äá» tiáº¿p tá»¥c há»c",
            "Xa lÃ¡nh báº¡n bÃ¨",
            "KhÃ´ng cáº§n há»c thÃªm ná»¯a"
        ],
        correct: 1,
        explanation: "Cáº£m xÃºc tá»± hÃ o khi hoÃ n thÃ nh bÃ i táº­p giÃºp báº¡n cÃ³ Äá»ng lá»±c Äá» tiáº¿p tá»¥c há»c vÃ  cá» gáº¯ng hÆ¡n."
    },
    {
        question: "Khi báº¡n bÃ¨ tá»©c giáº­n vá»i báº¡n, báº¡n nÃªn:",
        options: [
            "Tá»©c giáº­n láº¡i vÃ  khÃ´ng nÃ³i chuyá»n",
            "BÃ¬nh tÄ©nh há»i lÃ½ do vÃ  xin lá»i",
            "TrÃ¡nh nÃ© báº¡n ÄÃ³",
            "NÃ³i xáº¥u báº¡n vá»i ngÆ°á»i khÃ¡c"
        ],
        correct: 1,
        explanation: "BÃ¬nh tÄ©nh há»i lÃ½ do vÃ  xin lá»i giÃºp báº¡n hiá»u rÃµ váº¥n Äá» vÃ  hÃ n gáº¯n tÃ¬nh báº¡n."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y ghen tá» vá»i thÃ nh cÃ´ng cá»§a báº¡n, báº¡n nÃªn:",
        options: [
            "Cá» gáº¯ng lÃ m háº¡i báº¡n",
            "ChÃºc má»«ng vÃ  há»c há»i tá»« báº¡n",
            "TrÃ¡nh nÃ© báº¡n ÄÃ³",
            "NÃ³i xáº¥u báº¡n vá»i ngÆ°á»i khÃ¡c"
        ],
        correct: 1,
        explanation: "ChÃºc má»«ng vÃ  há»c há»i tá»« báº¡n lÃ  cÃ¡ch tÃ­ch cá»±c Äá» duy trÃ¬ tÃ¬nh báº¡n vÃ  phÃ¡t triá»n báº£n thÃ¢n."
    },
    {
        question: "Cáº£m xÃºc 'tin tÆ°á»ng' trong tÃ¬nh báº¡n cÃ³ nghÄ©a lÃ  gÃ¬?",
        options: [
            "Tin tÆ°á»ng mÃ¹ quÃ¡ng",
            "Tin tÆ°á»ng dá»±a trÃªn hÃ nh Äá»ng vÃ  lá»i nÃ³i",
            "Tin tÆ°á»ng táº¥t cáº£ má»i ngÆ°á»i",
            "KhÃ´ng bao giá» tin tÆ°á»ng ai"
        ],
        correct: 1,
        explanation: "Tin tÆ°á»ng trong tÃ¬nh báº¡n dá»±a trÃªn hÃ nh Äá»ng vÃ  lá»i nÃ³i cá»§a báº¡n, giÃºp xÃ¢y dá»±ng má»i quan há» bá»n vá»¯ng."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y bá» báº¡n bÃ¨ bá» rÆ¡i, báº¡n nÃªn:",
        options: [
            "Tá»©c giáº­n vÃ  khÃ´ng nÃ³i chuyá»n",
            "BÃ¬nh tÄ©nh há»i lÃ½ do vÃ  tÃ¬m hiá»u",
            "TrÃ¡nh nÃ© táº¥t cáº£ báº¡n bÃ¨",
            "NÃ³i xáº¥u báº¡n vá»i ngÆ°á»i khÃ¡c"
        ],
        correct: 1,
        explanation: "BÃ¬nh tÄ©nh há»i lÃ½ do vÃ  tÃ¬m hiá»u giÃºp báº¡n hiá»u rÃµ tÃ¬nh hÃ¬nh vÃ  cÃ³ thá» hÃ n gáº¯n tÃ¬nh báº¡n."
    },
    {
        question: "Cáº£m xÃºc 'ghen tá»' trong tÃ¬nh báº¡n thÆ°á»ng xuáº¥t hiá»n khi nÃ o?",
        options: [
            "Khi báº¡n thÃ nh cÃ´ng",
            "Khi báº¡n cÃ³ báº¡n má»i",
            "Khi báº¡n ÄÆ°á»£c yÃªu thÃ­ch",
            "Khi báº¡n cÃ³ tÃ i nÄng Äáº·c biá»t"
        ],
        correct: 1,
        explanation: "Cáº£m xÃºc ghen tá» trong tÃ¬nh báº¡n thÆ°á»ng xuáº¥t hiá»n khi báº¡n cÃ³ báº¡n má»i, sá»£ máº¥t Äi tÃ¬nh báº¡n hiá»n táº¡i."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y khÃ´ng ÄÆ°á»£c báº¡n bÃ¨ hiá»u, báº¡n nÃªn:",
        options: [
            "Tá»©c giáº­n vÃ  khÃ´ng nÃ³i chuyá»n",
            "Chia sáº» cáº£m xÃºc vÃ  suy nghÄ© vá»i báº¡n",
            "TrÃ¡nh nÃ© táº¥t cáº£ báº¡n bÃ¨",
            "NÃ³i xáº¥u báº¡n vá»i ngÆ°á»i khÃ¡c"
        ],
        correct: 1,
        explanation: "Chia sáº» cáº£m xÃºc vÃ  suy nghÄ© vá»i báº¡n giÃºp báº¡n ÄÆ°á»£c hiá»u vÃ  xÃ¢y dá»±ng má»i quan há» sÃ¢u sáº¯c hÆ¡n."
    },
    {
        question: "Cáº£m xÃºc 'tháº¥t vá»ng' khi báº¡n bÃ¨ khÃ´ng giá»¯ lá»i há»©a, báº¡n nÃªn:",
        options: [
            "Tá»©c giáº­n vÃ  khÃ´ng nÃ³i chuyá»n",
            "BÃ¬nh tÄ©nh nÃ³i chuyá»n vÃ  tÃ¬m hiá»u lÃ½ do",
            "TrÃ¡nh nÃ© báº¡n ÄÃ³",
            "NÃ³i xáº¥u báº¡n vá»i ngÆ°á»i khÃ¡c"
        ],
        correct: 1,
        explanation: "BÃ¬nh tÄ©nh nÃ³i chuyá»n vÃ  tÃ¬m hiá»u lÃ½ do giÃºp báº¡n hiá»u rÃµ tÃ¬nh hÃ¬nh vÃ  cÃ³ thá» hÃ n gáº¯n tÃ¬nh báº¡n."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y tá»± hÃ o vá» thÃ nh cÃ´ng cá»§a báº¡n, báº¡n nÃªn:",
        options: [
            "Khoe khoang vá»i má»i ngÆ°á»i",
            "Chia sáº» niá»m vui má»t cÃ¡ch khiÃªm tá»n",
            "Giáº¥u kÃ­n khÃ´ng cho ai biáº¿t",
            "Cáº£m tháº¥y xáº¥u há»"
        ],
        correct: 1,
        explanation: "Chia sáº» niá»m vui má»t cÃ¡ch khiÃªm tá»n giÃºp báº¡n cáº£m tháº¥y háº¡nh phÃºc mÃ  khÃ´ng lÃ m ngÆ°á»i khÃ¡c khÃ³ chá»u."
    },
    {
        question: "Cáº£m xÃºc 'biáº¿t Æ¡n' Äá»i vá»i báº¡n bÃ¨ giÃºp báº¡n:",
        options: [
            "Trá» nÃªn kiÃªu ngáº¡o",
            "TrÃ¢n trá»ng vÃ  duy trÃ¬ tÃ¬nh báº¡n",
            "Xa lÃ¡nh báº¡n bÃ¨",
            "KhÃ´ng cáº§n báº¡n bÃ¨ ná»¯a"
        ],
        correct: 1,
        explanation: "Cáº£m xÃºc biáº¿t Æ¡n Äá»i vá»i báº¡n bÃ¨ giÃºp báº¡n trÃ¢n trá»ng vÃ  duy trÃ¬ tÃ¬nh báº¡n, xÃ¢y dá»±ng má»i quan há» bá»n vá»¯ng."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y cÃ´ ÄÆ¡n trong nhÃ³m báº¡n, báº¡n nÃªn:",
        options: [
            "TrÃ¡nh nÃ© táº¥t cáº£ báº¡n bÃ¨",
            "TÃ¬m cÃ¡ch káº¿t ná»i vÃ  tham gia hoáº¡t Äá»ng",
            "Tá»©c giáº­n vÃ  khÃ´ng nÃ³i chuyá»n",
            "NÃ³i xáº¥u báº¡n vá»i ngÆ°á»i khÃ¡c"
        ],
        correct: 1,
        explanation: "TÃ¬m cÃ¡ch káº¿t ná»i vÃ  tham gia hoáº¡t Äá»ng giÃºp báº¡n vÆ°á»£t qua cáº£m giÃ¡c cÃ´ ÄÆ¡n vÃ  xÃ¢y dá»±ng má»i quan há» tá»t hÆ¡n."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y bá» bá» máº¹ hiá»u láº§m, báº¡n nÃªn:",
        options: [
            "Tá»©c giáº­n vÃ  khÃ´ng nÃ³i chuyá»n",
            "BÃ¬nh tÄ©nh giáº£i thÃ­ch vÃ  láº¯ng nghe",
            "TrÃ¡nh nÃ© bá» máº¹",
            "La hÃ©t Äá» chá»©ng minh mÃ¬nh ÄÃºng"
        ],
        correct: 1,
        explanation: "BÃ¬nh tÄ©nh giáº£i thÃ­ch vÃ  láº¯ng nghe giÃºp bá» máº¹ hiá»u báº¡n hÆ¡n vÃ  trÃ¡nh xung Äá»t khÃ´ng cáº§n thiáº¿t."
    },
    {
        question: "Cáº£m xÃºc 'tá»± hÃ o' khi ÄÆ°á»£c bá» máº¹ khen ngá»£i giÃºp báº¡n:",
        options: [
            "Trá» nÃªn kiÃªu ngáº¡o",
            "CÃ³ Äá»ng lá»±c Äá» tiáº¿p tá»¥c cá» gáº¯ng",
            "Xa lÃ¡nh báº¡n bÃ¨",
            "KhÃ´ng cáº§n há»c thÃªm ná»¯a"
        ],
        correct: 1,
        explanation: "Cáº£m xÃºc tá»± hÃ o khi ÄÆ°á»£c bá» máº¹ khen ngá»£i giÃºp báº¡n cÃ³ Äá»ng lá»±c Äá» tiáº¿p tá»¥c cá» gáº¯ng vÃ  phÃ¡t triá»n báº£n thÃ¢n."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y bá» bá» máº¹ so sÃ¡nh vá»i anh chá» em, báº¡n nÃªn:",
        options: [
            "Tá»©c giáº­n vÃ  khÃ´ng nÃ³i chuyá»n",
            "BÃ¬nh tÄ©nh nÃ³i chuyá»n vÃ  tÃ¬m hiá»u lÃ½ do",
            "TrÃ¡nh nÃ© bá» máº¹",
            "NÃ³i xáº¥u anh chá» em"
        ],
        correct: 1,
        explanation: "BÃ¬nh tÄ©nh nÃ³i chuyá»n vÃ  tÃ¬m hiá»u lÃ½ do giÃºp báº¡n hiá»u rÃµ tÃ¬nh hÃ¬nh vÃ  cÃ³ thá» hÃ n gáº¯n má»i quan há»."
    },
    {
        question: "Cáº£m xÃºc 'biáº¿t Æ¡n' Äá»i vá»i bá» máº¹ giÃºp báº¡n:",
        options: [
            "Trá» nÃªn kiÃªu ngáº¡o",
            "TrÃ¢n trá»ng vÃ  yÃªu thÆ°Æ¡ng bá» máº¹",
            "Xa lÃ¡nh bá» máº¹",
            "KhÃ´ng cáº§n bá» máº¹ ná»¯a"
        ],
        correct: 1,
        explanation: "Cáº£m xÃºc biáº¿t Æ¡n Äá»i vá»i bá» máº¹ giÃºp báº¡n trÃ¢n trá»ng vÃ  yÃªu thÆ°Æ¡ng bá» máº¹, xÃ¢y dá»±ng má»i quan há» tá»t Äáº¹p."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y bá» bá» máº¹ Ã©p buá»c lÃ m Äiá»u gÃ¬ ÄÃ³, báº¡n nÃªn:",
        options: [
            "Tá»©c giáº­n vÃ  khÃ´ng lÃ m",
            "BÃ¬nh tÄ©nh nÃ³i chuyá»n vÃ  tÃ¬m hiá»u lÃ½ do",
            "TrÃ¡nh nÃ© bá» máº¹",
            "La hÃ©t Äá» chá»©ng minh mÃ¬nh ÄÃºng"
        ],
        correct: 1,
        explanation: "BÃ¬nh tÄ©nh nÃ³i chuyá»n vÃ  tÃ¬m hiá»u lÃ½ do giÃºp báº¡n hiá»u rÃµ tÃ¬nh hÃ¬nh vÃ  cÃ³ thá» thá»a thuáº­n vá»i bá» máº¹."
    },
    {
        question: "Cáº£m xÃºc 'tá»± hÃ o' khi giÃºp Äá»¡ bá» máº¹ giÃºp báº¡n:",
        options: [
            "Trá» nÃªn kiÃªu ngáº¡o",
            "CÃ³ Äá»ng lá»±c Äá» tiáº¿p tá»¥c giÃºp Äá»¡",
            "Xa lÃ¡nh báº¡n bÃ¨",
            "KhÃ´ng cáº§n há»c thÃªm ná»¯a"
        ],
        correct: 1,
        explanation: "Cáº£m xÃºc tá»± hÃ o khi giÃºp Äá»¡ bá» máº¹ giÃºp báº¡n cÃ³ Äá»ng lá»±c Äá» tiáº¿p tá»¥c giÃºp Äá»¡ vÃ  xÃ¢y dá»±ng má»i quan há» tá»t Äáº¹p."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y bá» bá» máº¹ bá» rÆ¡i, báº¡n nÃªn:",
        options: [
            "Tá»©c giáº­n vÃ  khÃ´ng nÃ³i chuyá»n",
            "BÃ¬nh tÄ©nh nÃ³i chuyá»n vÃ  tÃ¬m hiá»u lÃ½ do",
            "TrÃ¡nh nÃ© bá» máº¹",
            "NÃ³i xáº¥u bá» máº¹ vá»i ngÆ°á»i khÃ¡c"
        ],
        correct: 1,
        explanation: "BÃ¬nh tÄ©nh nÃ³i chuyá»n vÃ  tÃ¬m hiá»u lÃ½ do giÃºp báº¡n hiá»u rÃµ tÃ¬nh hÃ¬nh vÃ  cÃ³ thá» hÃ n gáº¯n má»i quan há»."
    },
    {
        question: "Cáº£m xÃºc 'tá»± hÃ o' khi ÄÆ°á»£c bá» máº¹ tin tÆ°á»ng giÃºp báº¡n:",
        options: [
            "Trá» nÃªn kiÃªu ngáº¡o",
            "CÃ³ Äá»ng lá»±c Äá» tiáº¿p tá»¥c cá» gáº¯ng",
            "Xa lÃ¡nh báº¡n bÃ¨",
            "KhÃ´ng cáº§n há»c thÃªm ná»¯a"
        ],
        correct: 1,
        explanation: "Cáº£m xÃºc tá»± hÃ o khi ÄÆ°á»£c bá» máº¹ tin tÆ°á»ng giÃºp báº¡n cÃ³ Äá»ng lá»±c Äá» tiáº¿p tá»¥c cá» gáº¯ng vÃ  phÃ¡t triá»n báº£n thÃ¢n."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y bá» bá» máº¹ hiá»u láº§m vá» cáº£m xÃºc, báº¡n nÃªn:",
        options: [
            "Tá»©c giáº­n vÃ  khÃ´ng nÃ³i chuyá»n",
            "Chia sáº» cáº£m xÃºc vÃ  suy nghÄ© vá»i bá» máº¹",
            "TrÃ¡nh nÃ© bá» máº¹",
            "La hÃ©t Äá» chá»©ng minh mÃ¬nh ÄÃºng"
        ],
        correct: 1,
        explanation: "Chia sáº» cáº£m xÃºc vÃ  suy nghÄ© vá»i bá» máº¹ giÃºp báº¡n ÄÆ°á»£c hiá»u vÃ  xÃ¢y dá»±ng má»i quan há» sÃ¢u sáº¯c hÆ¡n."
    },
    {
        question: "Cáº£m xÃºc 'biáº¿t Æ¡n' Äá»i vá»i gia ÄÃ¬nh giÃºp báº¡n:",
        options: [
            "Trá» nÃªn kiÃªu ngáº¡o",
            "TrÃ¢n trá»ng vÃ  yÃªu thÆ°Æ¡ng gia ÄÃ¬nh",
            "Xa lÃ¡nh gia ÄÃ¬nh",
            "KhÃ´ng cáº§n gia ÄÃ¬nh ná»¯a"
        ],
        correct: 1,
        explanation: "Cáº£m xÃºc biáº¿t Æ¡n Äá»i vá»i gia ÄÃ¬nh giÃºp báº¡n trÃ¢n trá»ng vÃ  yÃªu thÆ°Æ¡ng gia ÄÃ¬nh, xÃ¢y dá»±ng má»i quan há» tá»t Äáº¹p."
    },
    {
        question: "Khi báº¡n cáº£m tháº¥y lo láº¯ng trÆ°á»c ká»³ thi, báº¡n nÃªn:",
        options: [
            "TrÃ¡nh nÃ© vÃ  khÃ´ng thi",
            "Chuáº©n bá» ká»¹ lÆ°á»¡ng vÃ  thá» sÃ¢u",
            "Lo láº¯ng suá»t ÄÃªm khÃ´ng ngá»§",
            "Nhá» ngÆ°á»i khÃ¡c thi giÃºp"
        ],
        correct: 1,
        explanation: "Chuáº©n bá» ká»¹ lÆ°á»¡ng vÃ  thá» sÃ¢u giÃºp báº¡n giáº£m lo láº¯ng vÃ  tá»± tin hÆ¡n khi thi."
    },
    {
        question: "Cáº£m xÃºc 'háº¡nh phÃºc' khi Äáº¡t ÄÆ°á»£c má»¥c tiÃªu giÃºp báº¡n:",
        options: [
            "Trá» nÃªn kiÃªu ngáº¡o",
            "CÃ³ Äá»ng lá»±c Äá» Äáº·t má»¥c tiÃªu má»i",
            "Xa lÃ¡nh báº¡n bÃ¨",
            "KhÃ´ng cáº§n cá» gáº¯ng ná»¯a"
        ],
        correct: 1,
        explanation: "Cáº£m xÃºc háº¡nh phÃºc khi Äáº¡t ÄÆ°á»£c má»¥c tiÃªu giÃºp báº¡n cÃ³ Äá»ng lá»±c Äá» Äáº·t má»¥c tiÃªu má»i vÃ  tiáº¿p tá»¥c phÃ¡t triá»n."
    }
];

let currentQuestion = 0;
let score = 0;
let currentQuiz = 0; // Track which quiz we're on
let totalQuizzes = Math.ceil(quizData.length / QUIZ_SIZE);

// Function to get current quiz questions
function getCurrentQuizQuestions() {
    const startIndex = currentQuiz * QUIZ_SIZE;
    const endIndex = Math.min(startIndex + QUIZ_SIZE, quizData.length);
    return quizData.slice(startIndex, endIndex);
}

function initQuiz() {
    updateQuizDisplay();
    setupQuizEventListeners();
}

function updateQuizDisplay() {
    const currentQuizQuestions = getCurrentQuizQuestions();
    
    if (!currentQuizQuestions || currentQuestion >= currentQuizQuestions.length) {
        console.error('Quiz data not available or question index out of bounds');
        return;
    }
    
    const question = currentQuizQuestions[currentQuestion];
    const progressFill = document.getElementById('progressFill');
    const progressText = document.getElementById('progressText');
    const quizQuestion = document.getElementById('quizQuestion');
    const quizOptions = document.getElementById('quizOptions');

    if (!progressFill || !progressText || !quizQuestion || !quizOptions) {
        console.error('Required quiz elements not found');
        return;
    }

    // Update progress
    const progress = ((currentQuestion + 1) / currentQuizQuestions.length) * 100;
    progressFill.style.width = progress + '%';
    progressText.textContent = `Quiz ${currentQuiz + 1}/${totalQuizzes} - CÃ¢u ${currentQuestion + 1}/${currentQuizQuestions.length}`;

    // Update question
    quizQuestion.innerHTML = `<h4>${question.question}</h4>`;

    // Update options
    quizOptions.innerHTML = '';
    question.options.forEach((option, index) => {
        const optionElement = document.createElement('button');
        optionElement.className = 'quiz-option';
        optionElement.setAttribute('data-answer', String.fromCharCode(65 + index));
        optionElement.innerHTML = `
            <span class="option-letter">${String.fromCharCode(65 + index)}</span>
            <span class="option-text">${option}</span>
        `;
        quizOptions.appendChild(optionElement);
    });

    // Hide feedback
    const quizFeedback = document.getElementById('quizFeedback');
    if (quizFeedback) {
        quizFeedback.style.display = 'none';
    }
}

function setupQuizEventListeners() {
    const quizOptions = document.getElementById('quizOptions');
    const quizFeedback = document.getElementById('quizFeedback');
    const nextQuestionBtn = document.getElementById('nextQuestionBtn');

    if (!quizOptions || !quizFeedback || !nextQuestionBtn) return;

    quizOptions.addEventListener('click', (e) => {
        if (e.target.closest('.quiz-option')) {
            const selectedOption = e.target.closest('.quiz-option');
            const selectedAnswer = selectedOption.getAttribute('data-answer');
            const correctAnswer = String.fromCharCode(65 + quizData[currentQuestion].correct);
            
            // Disable all options
            document.querySelectorAll('.quiz-option').forEach(option => {
                option.disabled = true;
                if (option.getAttribute('data-answer') === correctAnswer) {
                    option.classList.add('correct');
                } else if (option.getAttribute('data-answer') === selectedAnswer && selectedAnswer !== correctAnswer) {
                    option.classList.add('incorrect');
                }
            });

            // Show feedback
            const feedbackContent = quizFeedback.querySelector('.feedback-content');
            if (selectedAnswer === correctAnswer) {
                score++;
                feedbackContent.innerHTML = `
                    <div class="feedback-icon">ð</div>
                    <h4>ChÃ­nh xÃ¡c!</h4>
                    <p>${quizData[currentQuestion].explanation}</p>
                `;
            } else {
                feedbackContent.innerHTML = `
                    <div class="feedback-icon">ð¡</div>
                    <h4>ChÆ°a ÄÃºng!</h4>
                    <p>${quizData[currentQuestion].explanation}</p>
                `;
            }
            
            quizFeedback.style.display = 'block';
        }
    });

    nextQuestionBtn.addEventListener('click', () => {
        currentQuestion++;
        const currentQuizQuestions = getCurrentQuizQuestions();
        
        if (currentQuestion < currentQuizQuestions.length) {
            updateQuizDisplay();
        } else {
            // Quiz completed, show results
            showQuizResults();
        }
    });
}

        function showQuizResults() {
            const quizContainer = document.getElementById('quizContainer');
            const currentQuizQuestions = getCurrentQuizQuestions();
            const percentage = Math.round((score / currentQuizQuestions.length) * 100);
            
            // Save quiz results to localStorage
            userProgress.completeQuiz(percentage);
            
            quizContainer.innerHTML = `
                <div class="quiz-results">
                    <div class="results-icon">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <h3>Káº¿t quáº£ Quiz ${currentQuiz + 1}/${totalQuizzes}</h3>
                    <div class="score-display">
                        <span class="score-number">${score}/${currentQuizQuestions.length}</span>
                        <span class="score-percentage">${percentage}%</span>
                    </div>
                    <p class="score-message">
                        ${percentage >= 80 ? 'Xuáº¥t sáº¯c! Báº¡n hiá»u ráº¥t tá»t vá» cáº£m xÃºc!' : 
                          percentage >= 60 ? 'Tá»t! HÃ£y tiáº¿p tá»¥c há»c há»i thÃªm!' : 
                          'HÃ£y thá»­ láº¡i Äá» cáº£i thiá»n káº¿t quáº£!'}
                    </p>
                    <div class="points-earned">
                        <i class="fas fa-star"></i>
                        <span>+${Math.round(percentage * 20)} Äiá»m</span>
                    </div>
                    <div class="quiz-actions">
                        <button class="restart-quiz-btn" id="restartQuizBtn">LÃ m láº¡i</button>
                        ${currentQuiz < totalQuizzes - 1 ? 
                            `<button class="next-quiz-btn" id="nextQuizBtn">Quiz tiáº¿p theo</button>` : 
                            `<button class="complete-all-btn" id="completeAllBtn">HoÃ n thÃ nh táº¥t cáº£</button>`
                        }
                    </div>
                </div>
            `;
            
            // Add event listeners for buttons
            const restartBtn = document.getElementById('restartQuizBtn');
            if (restartBtn) {
                restartBtn.addEventListener('click', restartQuiz);
            }
            
            const nextQuizBtn = document.getElementById('nextQuizBtn');
            if (nextQuizBtn) {
                nextQuizBtn.addEventListener('click', nextQuiz);
            }
            
            const completeAllBtn = document.getElementById('completeAllBtn');
            if (completeAllBtn) {
                completeAllBtn.addEventListener('click', completeAllQuizzes);
            }
        }

function nextQuiz() {
    currentQuiz++;
    currentQuestion = 0;
    score = 0;
    
    // Reset quiz container to original state
    const quizContainer = document.getElementById('quizContainer');
    quizContainer.innerHTML = `
        <div class="quiz-card active" id="quizCard">
            <div class="quiz-header">
                <button class="back-to-start-btn" id="backToStartBtn">
                    <i class="fas fa-arrow-left"></i>
                    Quay láº¡i
                </button>
            </div>
            <div class="quiz-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span class="progress-text" id="progressText">Quiz ${currentQuiz + 1}/5 - CÃ¢u 1/10</span>
            </div>
            
            <div class="quiz-question" id="quizQuestion">
                <h4>Äang táº£i cÃ¢u há»i...</h4>
            </div>
            
            <div class="quiz-options" id="quizOptions">
                <button class="quiz-option" data-answer="A">
                    <span class="option-letter">A</span>
                    <span class="option-text">Äang táº£i...</span>
                </button>
                <button class="quiz-option" data-answer="B">
                    <span class="option-letter">B</span>
                    <span class="option-text">Äang táº£i...</span>
                </button>
                <button class="quiz-option" data-answer="C">
                    <span class="option-letter">C</span>
                    <span class="option-text">Äang táº£i...</span>
                </button>
                <button class="quiz-option" data-answer="D">
                    <span class="option-letter">D</span>
                    <span class="option-text">Äang táº£i...</span>
                </button>
            </div>
            
            <div class="quiz-feedback" id="quizFeedback" style="display: none;">
                <div class="feedback-content">
                    <div class="feedback-icon">ð</div>
                    <h4>ChÃ­nh xÃ¡c!</h4>
                    <p>Báº¡n ÄÃ£ hiá»u ráº¥t tá»t vá» cÃ¡ch xá»­ lÃ½ cáº£m xÃºc. HÃ£y tiáº¿p tá»¥c!</p>
                </div>
                <button class="next-question-btn" id="nextQuestionBtn">CÃ¢u tiáº¿p theo</button>
            </div>
        </div>
    `;
    
    // Add back to start button event listener
    const backBtn = document.getElementById('backToStartBtn');
    if (backBtn) {
        backBtn.addEventListener('click', () => {
            const startSection = document.getElementById('quizStartSection');
            const quizContainer = document.getElementById('quizContainer');
            
            if (startSection && quizContainer) {
                startSection.style.display = 'block';
                quizContainer.style.display = 'none';
            }
        });
    }
    
    // Update quiz display and setup event listeners
    updateQuizDisplay();
    setupQuizEventListeners();
}

function completeAllQuizzes() {
    // Show completion message
    const quizContainer = document.getElementById('quizContainer');
    quizContainer.innerHTML = `
        <div class="quiz-completion">
            <div class="completion-icon">
                <i class="fas fa-trophy"></i>
            </div>
            <h3>ð ChÃºc má»«ng!</h3>
            <p>Báº¡n ÄÃ£ hoÃ n thÃ nh táº¥t cáº£ ${totalQuizzes} quiz!</p>
            <p>Báº¡n ÄÃ£ Äáº¡t ÄÆ°á»£c huy hiá»u <strong>Tháº§y Quiz</strong>!</p>
            <button class="restart-all-btn" id="restartAllBtn">Báº¯t Äáº§u láº¡i tá»« Äáº§u</button>
        </div>
    `;
    
    const restartAllBtn = document.getElementById('restartAllBtn');
    if (restartAllBtn) {
        restartAllBtn.addEventListener('click', () => {
            currentQuiz = 0;
            currentQuestion = 0;
            score = 0;
            updateQuizDisplay();
            setupQuizEventListeners();
        });
    }
}

function restartQuiz() {
    currentQuestion = 0;
    score = 0;
    
    // Reset quiz container to original state
    const quizContainer = document.getElementById('quizContainer');
    quizContainer.innerHTML = `
        <div class="quiz-card active" id="quizCard">
            <div class="quiz-header">
                <button class="back-to-start-btn" id="backToStartBtn">
                    <i class="fas fa-arrow-left"></i>
                    Quay láº¡i
                </button>
            </div>
            <div class="quiz-progress">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span class="progress-text" id="progressText">Quiz 1/5 - CÃ¢u 1/10</span>
            </div>
            
            <div class="quiz-question" id="quizQuestion">
                <h4>Khi báº¡n cáº£m tháº¥y buá»n, báº¡n thÆ°á»ng lÃ m gÃ¬?</h4>
            </div>
            
            <div class="quiz-options" id="quizOptions">
                <button class="quiz-option" data-answer="A">
                    <span class="option-letter">A</span>
                    <span class="option-text">KhÃ³c vÃ  chia sáº» vá»i ngÆ°á»i thÃ¢n</span>
                </button>
                <button class="quiz-option" data-answer="B">
                    <span class="option-letter">B</span>
                    <span class="option-text">Nghe nháº¡c buá»n vÃ  á» má»t mÃ¬nh</span>
                </button>
                <button class="quiz-option" data-answer="C">
                    <span class="option-letter">C</span>
                    <span class="option-text">TÃ¬m cÃ¡ch lÃ m viá»c khÃ¡c Äá» quÃªn Äi</span>
                </button>
                <button class="quiz-option" data-answer="D">
                    <span class="option-letter">D</span>
                    <span class="option-text">Váº½ tranh hoáº·c viáº¿t nháº­t kÃ½</span>
                </button>
            </div>
            
            <div class="quiz-feedback" id="quizFeedback" style="display: none;">
                <div class="feedback-content">
                    <div class="feedback-icon">ð</div>
                    <h4>ChÃ­nh xÃ¡c!</h4>
                    <p>Báº¡n ÄÃ£ hiá»u ráº¥t tá»t vá» cÃ¡ch xá»­ lÃ½ cáº£m xÃºc. HÃ£y tiáº¿p tá»¥c!</p>
                </div>
                <button class="next-question-btn" id="nextQuestionBtn">CÃ¢u tiáº¿p theo</button>
            </div>
        </div>
    `;
    
    // Add back to start button event listener
    const backBtn = document.getElementById('backToStartBtn');
    if (backBtn) {
        backBtn.addEventListener('click', () => {
            const startSection = document.getElementById('quizStartSection');
            const quizContainer = document.getElementById('quizContainer');
            
            if (startSection && quizContainer) {
                startSection.style.display = 'block';
                quizContainer.style.display = 'none';
            }
        });
    }
    
    // Re-initialize quiz
    updateQuizDisplay();
    setupQuizEventListeners();
}

// Story System
function initStories() {
    const storyCards = document.querySelectorAll('.story-card');
    storyCards.forEach(card => {
        card.addEventListener('click', () => {
            const storyId = card.getAttribute('data-story');
            openStory(storyId);
        });
    });
}

        function openStory(storyId) {
            if (!storyId) {
                console.error('Story ID is required');
                return;
            }
            
            // Save story read to localStorage
            userProgress.readStory(storyId);
            
            const stories = {
                '1': {
                    title: 'ChÃº Gáº¥u vÃ  Cáº£m xÃºc',
                    content: `
                        <div class="story-content-full">
                            <h3>ChÃº Gáº¥u vÃ  Cáº£m xÃºc</h3>
                            <div class="story-text">
                                <p>NgÃ y xá»­a ngÃ y xÆ°a, cÃ³ má»t chÃº gáº¥u tÃªn lÃ  Boo sá»ng trong rá»«ng xanh. Boo ráº¥t hay thay Äá»i cáº£m xÃºc - khi thÃ¬ vui váº» nháº£y nhÃ³t, khi thÃ¬ buá»n bÃ£ ngá»i má»t gÃ³c.</p>
                                
                                <p>Má»t ngÃ y ná», Boo cáº£m tháº¥y ráº¥t tá»©c giáº­n vÃ¬ khÃ´ng tÃ¬m ÄÆ°á»£c máº­t ong. ChÃº gáº¥u ÄÃ£ Äáº­p phÃ¡ tá» ong vÃ  lÃ m tá»n thÆ°Æ¡ng nhá»¯ng chÃº ong nhá». Nhá»¯ng chÃº ong bay Äi háº¿t, vÃ  Boo cÃ ng tá»©c giáº­n hÆ¡n.</p>
                                
                                <p>BÃ  gáº¥u giÃ  thÃ´ng thÃ¡i ÄÃ£ dáº¡y Boo: "Con Æ¡i, cáº£m xÃºc lÃ  Äiá»u tá»± nhiÃªn, nhÆ°ng con cáº§n há»c cÃ¡ch quáº£n lÃ½ chÃºng. Khi tá»©c giáº­n, hÃ£y hÃ­t thá» sÃ¢u vÃ  nghÄ© vá» háº­u quáº£ trÆ°á»c khi hÃ nh Äá»ng."</p>
                                
                                <p>Boo há»c ÄÆ°á»£c cÃ¡ch hÃ­t thá» sÃ¢u, Äáº¿m tá»« 1 Äáº¿n 10, vÃ  nghÄ© vá» nhá»¯ng Äiá»u tá»t Äáº¹p. ChÃº gáº¥u cÅ©ng há»c cÃ¡ch chia sáº» cáº£m xÃºc vá»i báº¡n bÃ¨ thay vÃ¬ giá»¯ trong lÃ²ng.</p>
                                
                                <p>Má»t ngÃ y khÃ¡c, Boo cáº£m tháº¥y buá»n vÃ¬ máº¥t báº¡n. Thay vÃ¬ khÃ³c má»t mÃ¬nh, chÃº gáº¥u ÄÃ£ tÃ¬m Äáº¿n bÃ  gáº¥u giÃ  Äá» chia sáº». BÃ  gáº¥u ÄÃ£ dáº¡y Boo ráº±ng: "Buá»n lÃ  cáº£m xÃºc bÃ¬nh thÆ°á»ng, nhÆ°ng con khÃ´ng nÃªn Äá» nÃ³ kÃ©o dÃ i quÃ¡ lÃ¢u. HÃ£y tÃ¬m nhá»¯ng hoáº¡t Äá»ng vui váº» Äá» lÃ m."</p>
                                
                                <p>Boo báº¯t Äáº§u váº½ tranh, chÆ¡i vá»i báº¡n bÃ¨, vÃ  giÃºp Äá»¡ nhá»¯ng con váº­t khÃ¡c trong rá»«ng. ChÃº gáº¥u nháº­n ra ráº±ng khi giÃºp Äá»¡ ngÆ°á»i khÃ¡c, mÃ¬nh cÅ©ng cáº£m tháº¥y vui váº» hÆ¡n.</p>
                                
                                <p>Tá»« ÄÃ³, Boo há»c ÄÆ°á»£c cÃ¡ch kiá»m soÃ¡t cáº£m xÃºc vÃ  trá» thÃ nh má»t chÃº gáº¥u tá»t bá»¥ng, ÄÆ°á»£c má»i ngÆ°á»i yÃªu quÃ½. ChÃº gáº¥u cÅ©ng dáº¡y láº¡i nhá»¯ng bÃ i há»c nÃ y cho cÃ¡c báº¡n nhá» khÃ¡c trong rá»«ng.</p>
                            </div>
                            <div class="story-moral">
                                <h4>BÃ i há»c:</h4>
                                <p>Cáº£m xÃºc lÃ  bÃ¬nh thÆ°á»ng, nhÆ°ng chÃºng ta cáº§n há»c cÃ¡ch quáº£n lÃ½ chÃºng má»t cÃ¡ch tÃ­ch cá»±c. HÃ£y chia sáº» cáº£m xÃºc vá»i ngÆ°á»i thÃ¢n vÃ  tÃ¬m nhá»¯ng hoáº¡t Äá»ng vui váº» Äá» lÃ m khi buá»n.</p>
                            </div>
                            <div class="story-reward">
                                <i class="fas fa-star"></i>
                                <span>+50 Äiá»m</span>
                            </div>
                        </div>
                    `
                },
                '2': {
                    title: 'Báº¡n bÃ¨ vÃ  Sá»± chia sáº»',
                    content: `
                        <div class="story-content-full">
                            <h3>Báº¡n bÃ¨ vÃ  Sá»± chia sáº»</h3>
                            <div class="story-text">
                                <p>Minh vÃ  Lan lÃ  hai ngÆ°á»i báº¡n thÃ¢n tá»« nhá». Há» luÃ´n chÆ¡i cÃ¹ng nhau, há»c cÃ¹ng nhau, vÃ  chia sáº» má»i thá»© vá»i nhau.</p>
                                
                                <p>Má»t ngÃ y, Lan cáº£m tháº¥y ráº¥t buá»n vÃ¬ bá» Äiá»m kÃ©m trong bÃ i kiá»m tra toÃ¡n. Lan sá»£ bá» máº¹ sáº½ tháº¥t vá»ng vÃ  báº¡n bÃ¨ sáº½ cÆ°á»i chÃª. CÃ´ bÃ© ÄÃ£ khÃ³c má»t mÃ¬nh trong phÃ²ng.</p>
                                
                                <p>Minh Äáº¿n nhÃ  Lan vÃ  tháº¥y báº¡n Äang buá»n. Thay vÃ¬ há»i ngay, Minh ÄÃ£ ngá»i bÃªn cáº¡nh Lan vÃ  há»i: "Báº¡n cÃ³ muá»n chia sáº» vá»i mÃ¬nh khÃ´ng? MÃ¬nh sáº½ láº¯ng nghe."</p>
                                
                                <p>Lan ÄÃ£ ká» cho Minh nghe vá» ná»i buá»n cá»§a mÃ¬nh. Minh khÃ´ng chá» láº¯ng nghe mÃ  cÃ²n Äá»ng viÃªn: "Äiá»m kÃ©m khÃ´ng cÃ³ nghÄ©a lÃ  báº¡n kÃ©m thÃ´ng minh. CÃ³ thá» báº¡n chá» cáº§n há»c cÃ¡ch khÃ¡c thÃ´i. MÃ¬nh sáº½ giÃºp báº¡n há»c toÃ¡n nhÃ©!"</p>
                                
                                <p>Tá»« ÄÃ³, Minh vÃ  Lan há»c cÃ¹ng nhau má»i ngÃ y. Minh dáº¡y Lan cÃ¡ch giáº£i toÃ¡n dá» hiá»u hÆ¡n, vÃ  Lan cÅ©ng giÃºp Minh há»c tiáº¿ng Anh. Cáº£ hai Äá»u tiáº¿n bá» ráº¥t nhiá»u.</p>
                                
                                <p>Má»t láº§n khÃ¡c, Minh cáº£m tháº¥y lo láº¯ng vÃ¬ sáº¯p thi há»c ká»³. Lan ÄÃ£ an á»§i: "Báº¡n ÄÃ£ há»c ráº¥t chÄm chá» rá»i, mÃ¬nh tin báº¡n sáº½ lÃ m tá»t. Náº¿u báº¡n lo láº¯ng, hÃ£y hÃ­t thá» sÃ¢u vÃ  nghÄ© vá» nhá»¯ng Äiá»u tÃ­ch cá»±c."</p>
                                
                                <p>Nhá» sá»± chia sáº» vÃ  há» trá»£ láº«n nhau, cáº£ hai ÄÃ£ vÆ°á»£t qua nhiá»u khÃ³ khÄn vÃ  trá» nÃªn thÃ¢n thiáº¿t hÆ¡n. Há» há»c ÄÆ°á»£c ráº±ng tÃ¬nh báº¡n tháº­t sá»± lÃ  khi cÃ³ thá» chia sáº» cáº£ niá»m vui vÃ  ná»i buá»n.</p>
                            </div>
                            <div class="story-moral">
                                <h4>BÃ i há»c:</h4>
                                <p>Chia sáº» cáº£m xÃºc vá»i báº¡n bÃ¨ khÃ´ng chá» giÃºp chÃºng ta cáº£m tháº¥y tá»t hÆ¡n mÃ  cÃ²n lÃ m tÃ¬nh báº¡n thÃªm gáº¯n bÃ³. HÃ£y láº¯ng nghe vÃ  há» trá»£ báº¡n bÃ¨ khi há» cáº§n.</p>
                            </div>
                            <div class="story-reward">
                                <i class="fas fa-star"></i>
                                <span>+50 Äiá»m</span>
                            </div>
                        </div>
                    `
                },
                '3': {
                    title: 'VÆ°á»£t qua Ná»i sá»£',
                    content: `
                        <div class="story-content-full">
                            <h3>VÆ°á»£t qua Ná»i sá»£</h3>
                            <div class="story-text">
                                <p>Hoa lÃ  má»t cÃ´ bÃ© ráº¥t sá»£ bÃ³ng tá»i. Má»i khi trá»i tá»i, cÃ´ bÃ© thÆ°á»ng khÃ³c vÃ  gá»i máº¹. Hoa sá»£ ráº±ng trong bÃ³ng tá»i cÃ³ nhá»¯ng con quÃ¡i váº­t Äang áº©n náº¥p.</p>
                                
                                <p>Má»t ngÃ y, máº¹ ÄÃ£ dáº¡y Hoa cÃ¡ch Äá»i máº·t vá»i ná»i sá»£: "Con Æ¡i, sá»£ hÃ£i lÃ  cáº£m xÃºc bÃ¬nh thÆ°á»ng. NhÆ°ng thay vÃ¬ trá»n trÃ¡nh, con hÃ£y thá»­ hiá»u ná»i sá»£ cá»§a mÃ¬nh. BÃ³ng tá»i khÃ´ng cÃ³ gÃ¬ ÄÃ¡ng sá»£ cáº£, nÃ³ chá» lÃ  khÃ´ng cÃ³ Ã¡nh sÃ¡ng thÃ´i."</p>
                                
                                <p>Máº¹ ÄÃ£ dáº¡y Hoa cÃ¡ch thá» sÃ¢u vÃ  Äáº¿m tá»« 1 Äáº¿n 10 khi cáº£m tháº¥y sá»£. Máº¹ cÅ©ng dáº¡y Hoa tÆ°á»ng tÆ°á»£ng vá» nhá»¯ng Äiá»u tÃ­ch cá»±c, nhÆ° nhá»¯ng ngÃ´i sao láº¥p lÃ¡nh trÃªn báº§u trá»i ÄÃªm.</p>
                                
                                <p>Hoa báº¯t Äáº§u thá»­ ngá»§ má»t mÃ¬nh vá»i ÄÃ¨n ngá»§ nhá». CÃ´ bÃ© há»c cÃ¡ch thá» sÃ¢u vÃ  nghÄ© vá» nhá»¯ng Äiá»u vui váº». Dáº§n dáº§n, Hoa nháº­n ra ráº±ng bÃ³ng tá»i khÃ´ng ÄÃ¡ng sá»£ nhÆ° cÃ´ bÃ© nghÄ©.</p>
                                
                                <p>Má»t ÄÃªm, Hoa nghe tháº¥y tiáº¿ng Äá»ng trong phÃ²ng. Thay vÃ¬ sá»£ hÃ£i, cÃ´ bÃ© ÄÃ£ thá» sÃ¢u vÃ  kiá»m tra xem ÄÃ³ lÃ  gÃ¬. HÃ³a ra ÄÃ³ chá» lÃ  tiáº¿ng giÃ³ thá»i qua cá»­a sá». Hoa cáº£m tháº¥y ráº¥t tá»± hÃ o vÃ¬ ÄÃ£ vÆ°á»£t qua ná»i sá»£.</p>
                                
                                <p>Tá»« ÄÃ³, Hoa khÃ´ng cÃ²n sá»£ bÃ³ng tá»i ná»¯a. CÃ´ bÃ© tháº­m chÃ­ cÃ²n thÃ­ch ngáº¯m sao vÃ o ban ÄÃªm. Hoa há»c ÄÆ°á»£c ráº±ng khi chÃºng ta Äá»i máº·t vá»i ná»i sá»£, chÃºng ta sáº½ trá» nÃªn máº¡nh máº½ hÆ¡n.</p>
                                
                                <p>Hoa cÅ©ng dáº¡y láº¡i nhá»¯ng bÃ i há»c nÃ y cho em trai cá»§a mÃ¬nh khi em cÅ©ng sá»£ bÃ³ng tá»i. CÃ´ bÃ© trá» thÃ nh má»t ngÆ°á»i chá» gÃ¡i dÅ©ng cáº£m vÃ  tá»± tin.</p>
                            </div>
                            <div class="story-moral">
                                <h4>BÃ i há»c:</h4>
                                <p>ChÃºng ta cÃ³ thá» há»c cÃ¡ch Äá»i máº·t vÃ  vÆ°á»£t qua nhá»¯ng ná»i sá»£ hÃ£i báº±ng cÃ¡ch hiá»u vÃ  cháº¥p nháº­n chÃºng. HÃ£y thá» sÃ¢u vÃ  nghÄ© vá» nhá»¯ng Äiá»u tÃ­ch cá»±c khi cáº£m tháº¥y sá»£.</p>
                            </div>
                            <div class="story-reward">
                                <i class="fas fa-star"></i>
                                <span>+50 Äiá»m</span>
                            </div>
                        </div>
                    `
                },
                '4': {
                    title: 'LÃ m viá»c nhÃ³m',
                    content: `
                        <div class="story-content-full">
                            <h3>LÃ m viá»c nhÃ³m</h3>
                            <div class="story-text">
                                <p>Minh, Lan vÃ  Hoa ÄÆ°á»£c cÃ´ giÃ¡o giao nhiá»m vá»¥ lÃ m má»t dá»± Ã¡n vá» mÃ´i trÆ°á»ng. Ban Äáº§u, cáº£ ba Äá»u muá»n lÃ m theo Ã½ kiáº¿n cá»§a mÃ¬nh vÃ  khÃ´ng chá»u láº¯ng nghe nhau.</p>
                                
                                <p>Minh muá»n lÃ m poster vá» rá»«ng, Lan muá»n lÃ m video vá» biá»n, cÃ²n Hoa muá»n lÃ m mÃ´ hÃ¬nh vá» thÃ nh phá» xanh. Cáº£ ba Äá»u cÃ£i nhau vÃ  khÃ´ng ai chá»u nhÆ°á»ng ai.</p>
                                
                                <p>CÃ´ giÃ¡o ÄÃ£ dáº¡y cÃ¡c báº¡n: "LÃ m viá»c nhÃ³m khÃ´ng cÃ³ nghÄ©a lÃ  ai cÅ©ng pháº£i lÃ m giá»ng nhau. Má»i ngÆ°á»i cÃ³ thá» ÄÃ³ng gÃ³p Ã½ tÆ°á»ng riÃªng, nhÆ°ng cáº§n biáº¿t láº¯ng nghe vÃ  há»£p tÃ¡c vá»i nhau."</p>
                                
                                <p>Tá»« ÄÃ³, ba báº¡n ÄÃ£ há»c cÃ¡ch chia sáº» Ã½ tÆ°á»ng vÃ  láº¯ng nghe nhau. Minh váº½ poster rá»«ng, Lan quay video biá»n, cÃ²n Hoa lÃ m mÃ´ hÃ¬nh thÃ nh phá». Káº¿t quáº£ lÃ  má»t dá»± Ã¡n hoÃ n chá»nh vá» mÃ´i trÆ°á»ng.</p>
                                
                                <p>Khi trÃ¬nh bÃ y trÆ°á»c lá»p, cáº£ ba Äá»u tá»± hÃ o vá» thÃ nh quáº£ chung. Há» nháº­n ra ráº±ng khi há»£p tÃ¡c, má»i viá»c sáº½ dá» dÃ ng vÃ  thÃº vá» hÆ¡n nhiá»u.</p>
                                
                                <p>Tá»« ÄÃ³, ba báº¡n trá» thÃ nh nhÃ³m báº¡n thÃ¢n vÃ  thÆ°á»ng xuyÃªn lÃ m viá»c cÃ¹ng nhau. Há» há»c ÄÆ°á»£c ráº±ng tÃ¬nh báº¡n vÃ  sá»± há»£p tÃ¡c lÃ  chÃ¬a khÃ³a cá»§a thÃ nh cÃ´ng.</p>
                            </div>
                            <div class="story-moral">
                                <h4>BÃ i há»c:</h4>
                                <p>LÃ m viá»c nhÃ³m giÃºp chÃºng ta há»c há»i tá»« nhau vÃ  Äáº¡t ÄÆ°á»£c káº¿t quáº£ tá»t hÆ¡n. HÃ£y láº¯ng nghe, chia sáº» vÃ  há»£p tÃ¡c vá»i báº¡n bÃ¨.</p>
                            </div>
                            <div class="story-reward">
                                <i class="fas fa-star"></i>
                                <span>+50 Äiá»m</span>
                            </div>
                        </div>
                    `
                },
                '5': {
                    title: 'SÃ¡ng táº¡o vÃ  TÆ°á»ng tÆ°á»£ng',
                    content: `
                        <div class="story-content-full">
                            <h3>SÃ¡ng táº¡o vÃ  TÆ°á»ng tÆ°á»£ng</h3>
                            <div class="story-text">
                                <p>Nam lÃ  má»t cáº­u bÃ© ráº¥t thÃ­ch váº½ vÃ  tÆ°á»ng tÆ°á»£ng. Cáº­u thÆ°á»ng váº½ nhá»¯ng con váº­t ká»³ láº¡ vÃ  nhá»¯ng thÃ nh phá» trong mÆ¡. NhÆ°ng má»t sá» báº¡n bÃ¨ cÆ°á»i chÃª vÃ  nÃ³i ráº±ng nhá»¯ng gÃ¬ Nam váº½ khÃ´ng cÃ³ tháº­t.</p>
                                
                                <p>Nam cáº£m tháº¥y buá»n vÃ  báº¯t Äáº§u váº½ theo nhá»¯ng gÃ¬ ngÆ°á»i khÃ¡c muá»n. Cáº­u váº½ nhá»¯ng bá»©c tranh ÄÆ¡n giáº£n vÃ  nhÃ m chÃ¡n, khÃ´ng cÃ²n sÃ¡ng táº¡o ná»¯a.</p>
                                
                                <p>CÃ´ giÃ¡o má»¹ thuáº­t ÄÃ£ khuyáº¿n khÃ­ch Nam: "SÃ¡ng táº¡o lÃ  Äiá»u tuyá»t vá»i nháº¥t mÃ  con ngÆ°á»i cÃ³. Äá»«ng Äá» ai ÄÃ³ lÃ m máº¥t Äi trÃ­ tÆ°á»ng tÆ°á»£ng cá»§a em. HÃ£y váº½ nhá»¯ng gÃ¬ em muá»n, nhá»¯ng gÃ¬ em mÆ¡ Æ°á»c."</p>
                                
                                <p>Nam báº¯t Äáº§u váº½ láº¡i nhá»¯ng gÃ¬ cáº­u thÃ­ch. Cáº­u váº½ nhá»¯ng con rá»ng bay lÆ°á»£n, nhá»¯ng thÃ nh phá» dÆ°á»i nÆ°á»c, vÃ  nhá»¯ng hÃ nh tinh xa xÃ´i. Má»i bá»©c tranh Äá»u chá»©a Äá»±ng nhá»¯ng cÃ¢u chuyá»n thÃº vá».</p>
                                
                                <p>Dáº§n dáº§n, cÃ¡c báº¡n bÃ¨ cÅ©ng báº¯t Äáº§u thÃ­ch thÃº vá»i nhá»¯ng bá»©c tranh cá»§a Nam. Há» xin Nam dáº¡y cÃ¡ch váº½ vÃ  cÃ¹ng nhau táº¡o ra nhá»¯ng tÃ¡c pháº©m tuyá»t Äáº¹p.</p>
                                
                                <p>Nam há»c ÄÆ°á»£c ráº±ng sÃ¡ng táº¡o vÃ  trÃ­ tÆ°á»ng tÆ°á»£ng lÃ  mÃ³n quÃ  quÃ½ giÃ¡. Khi chÃºng ta dÃ¡m mÆ¡ Æ°á»c vÃ  sÃ¡ng táº¡o, chÃºng ta cÃ³ thá» táº¡o ra nhá»¯ng Äiá»u ká»³ diá»u.</p>
                            </div>
                            <div class="story-moral">
                                <h4>BÃ i há»c:</h4>
                                <p>SÃ¡ng táº¡o vÃ  trÃ­ tÆ°á»ng tÆ°á»£ng giÃºp chÃºng ta phÃ¡t triá»n tÃ i nÄng vÃ  táº¡o ra nhá»¯ng Äiá»u tuyá»t vá»i. HÃ£y dÃ¡m mÆ¡ Æ°á»c vÃ  sÃ¡ng táº¡o theo cÃ¡ch riÃªng cá»§a mÃ¬nh.</p>
                            </div>
                            <div class="story-reward">
                                <i class="fas fa-star"></i>
                                <span>+50 Äiá»m</span>
                            </div>
                        </div>
                    `
                },
                '6': {
                    title: 'TrÃ¡ch nhiá»m vÃ  Tá»± láº­p',
                    content: `
                        <div class="story-content-full">
                            <h3>TrÃ¡ch nhiá»m vÃ  Tá»± láº­p</h3>
                            <div class="story-text">
                                <p>Minh lÃ  má»t cáº­u bÃ© 8 tuá»i, luÃ´n ÄÆ°á»£c bá» máº¹ chÄm sÃ³c tá»«ng li tá»«ng tÃ­. Cáº­u khÃ´ng biáº¿t tá»± máº·c quáº§n Ã¡o, khÃ´ng biáº¿t dá»n dáº¹p phÃ²ng, vÃ  luÃ´n nhá» ngÆ°á»i khÃ¡c giÃºp Äá»¡.</p>
                                
                                <p>Má»t ngÃ y, bá» máº¹ Minh pháº£i Äi cÃ´ng tÃ¡c xa vÃ  Äá» Minh á» nhÃ  vá»i bÃ  ngoáº¡i. BÃ  ngoáº¡i ÄÃ£ dáº¡y Minh: "Con ÄÃ£ lá»n rá»i, cáº§n há»c cÃ¡ch tá»± chÄm sÃ³c báº£n thÃ¢n. ÄÃ¢y lÃ  trÃ¡ch nhiá»m cá»§a con."</p>
                                
                                <p>Minh báº¯t Äáº§u há»c cÃ¡ch tá»± máº·c quáº§n Ã¡o, tá»± dá»n dáº¹p phÃ²ng, vÃ  tá»± chuáº©n bá» Äá» dÃ¹ng há»c táº­p. Ban Äáº§u ráº¥t khÃ³ khÄn, nhÆ°ng dáº§n dáº§n cáº­u ÄÃ£ quen.</p>
                                
                                <p>Khi bá» máº¹ trá» vá», há» ráº¥t ngáº¡c nhiÃªn khi tháº¥y Minh ÄÃ£ biáº¿t tá»± láº­p. Cáº­u tá»± dá»n dáº¹p phÃ²ng, tá»± chuáº©n bá» Äá» Äi há»c, vÃ  tháº­m chÃ­ cÃ²n giÃºp bá» máº¹ lÃ m viá»c nhÃ .</p>
                                
                                <p>Minh cáº£m tháº¥y ráº¥t tá»± hÃ o vá» báº£n thÃ¢n. Cáº­u nháº­n ra ráº±ng khi tá»± láº­p, mÃ¬nh sáº½ máº¡nh máº½ vÃ  tá»± tin hÆ¡n. Cáº­u cÅ©ng hiá»u ráº±ng cÃ³ trÃ¡ch nhiá»m vá»i báº£n thÃ¢n lÃ  Äiá»u quan trá»ng.</p>
                                
                                <p>Tá»« ÄÃ³, Minh luÃ´n cá» gáº¯ng tá»± lÃ m nhá»¯ng viá»c trong kháº£ nÄng cá»§a mÃ¬nh. Cáº­u trá» thÃ nh má»t cáº­u bÃ© tá»± láº­p vÃ  cÃ³ trÃ¡ch nhiá»m, ÄÆ°á»£c má»i ngÆ°á»i yÃªu quÃ½.</p>
                            </div>
                            <div class="story-moral">
                                <h4>BÃ i há»c:</h4>
                                <p>Tá»± láº­p vÃ  cÃ³ trÃ¡ch nhiá»m giÃºp chÃºng ta trá» nÃªn máº¡nh máº½ vÃ  tá»± tin. HÃ£y há»c cÃ¡ch tá»± chÄm sÃ³c báº£n thÃ¢n vÃ  cÃ³ trÃ¡ch nhiá»m vá»i nhá»¯ng viá»c mÃ¬nh lÃ m.</p>
                            </div>
                            <div class="story-reward">
                                <i class="fas fa-star"></i>
                                <span>+50 Äiá»m</span>
                            </div>
                        </div>
                    `
                }
            };

            const story = stories[storyId];
            if (story) {
                showStoryModal(story.title, story.content);
            } else {
                console.error(`Story with ID ${storyId} not found`);
                alert('CÃ¢u chuyá»n khÃ´ng tÃ¬m tháº¥y. Vui lÃ²ng thá»­ láº¡i!');
            }
        }

function showStoryModal(title, content) {
    if (!title || !content) {
        console.error('Title and content are required for story modal');
        return;
    }
    
    const modal = document.createElement('div');
    modal.className = 'story-modal-overlay';
    modal.innerHTML = `
        <div class="story-modal">
            <div class="story-modal-header">
                <h3>${title}</h3>
                <button class="close-story-btn">&times;</button>
            </div>
            <div class="story-modal-body">
                ${content}
            </div>
            <div class="story-modal-footer">
                <button class="close-story-btn">ÄÃ³ng</button>
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
    
    // Close modal
    modal.querySelectorAll('.close-story-btn').forEach(btn => {
        btn.addEventListener('click', () => {
            document.body.removeChild(modal);
        });
    });
    
    // Close on overlay click
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            document.body.removeChild(modal);
        }
    });
}

// Initialize everything when page loads
document.addEventListener('DOMContentLoaded', () => {
    console.log('Initializing Kham Pha page...');
    
    // Load real data from localStorage
    userProgress.updateUI();
    
    // Initialize interactive features
    initStories();
    initQuizStart();
    
    console.log('Kham Pha page initialized successfully!');
});

// Initialize quiz start functionality
function initQuizStart() {
    const startBtn = document.getElementById('startQuizBtn');
    const startSection = document.getElementById('quizStartSection');
    const quizContainer = document.getElementById('quizContainer');
    
    if (startBtn && startSection && quizContainer) {
        startBtn.addEventListener('click', () => {
            // Hide start section
            startSection.style.display = 'none';
            
            // Show quiz container
            quizContainer.style.display = 'block';
            
            // Initialize quiz
            initQuiz();
        });
    }
}

// Scroll Animation System
class ScrollAnimations {
    constructor() {
        this.observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };
        this.observer = new IntersectionObserver(this.handleIntersection.bind(this), this.observerOptions);
        this.init();
    }
    
    init() {
        // Observe all animated elements
        const animatedElements = document.querySelectorAll('.fade-in, .slide-in-left, .slide-in-right, .scale-in, .bounce-in, .rotate-in, .flip-in-x, .flip-in-y, .zoom-in, .slide-up, .slide-down, .elastic-in, .wiggle-in, .bounce-jump, .wiggle-bounce, .hop-skip, .spring-bounce');
        animatedElements.forEach(element => {
            this.observer.observe(element);
        });
        
        // Add smooth scroll to all anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    }
    
    handleIntersection(entries) {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('visible');
                
                // Add stagger effect for child elements
                const staggerElements = entry.target.querySelectorAll('.stagger-1, .stagger-2, .stagger-3, .stagger-4, .stagger-5');
                staggerElements.forEach((element, index) => {
                    setTimeout(() => {
                        element.classList.add('visible');
                    }, index * 100);
                });
                
                // Stop observing this element
                this.observer.unobserve(entry.target);
            }
        });
    }
}

// Interactive Effects System
class InteractiveEffects {
    constructor() {
        this.init();
    }
    
    init() {
        // Add hover effects to buttons
        this.addButtonEffects();
        
        // Add click effects
        this.addClickEffects();
        
        // Add typing effect to hero title
        this.addTypingEffect();
        
        // Add parallax scrolling
        this.addParallaxEffect();
    }
    
    addButtonEffects() {
        // Add ripple effect to buttons
        document.querySelectorAll('button, .btn').forEach(button => {
            button.addEventListener('click', function(e) {
                const ripple = document.createElement('span');
                const rect = this.getBoundingClientRect();
                const size = Math.max(rect.width, rect.height);
                const x = e.clientX - rect.left - size / 2;
                const y = e.clientY - rect.top - size / 2;
                
                ripple.style.width = ripple.style.height = size + 'px';
                ripple.style.left = x + 'px';
                ripple.style.top = y + 'px';
                ripple.classList.add('ripple');
                
                this.appendChild(ripple);
                
                setTimeout(() => {
                    ripple.remove();
                }, 600);
            });
        });
    }
    
    addClickEffects() {
        // Add shake effect on wrong answers
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('quiz-option') && e.target.classList.contains('wrong')) {
                e.target.classList.add('shake');
                setTimeout(() => {
                    e.target.classList.remove('shake');
                }, 500);
            }
        });
    }
    
    addTypingEffect() {
        // Typing effect disabled for page title as requested
        // Only apply to other elements if needed
    }
    
    addParallaxEffect() {
        window.addEventListener('scroll', () => {
            const scrolled = window.pageYOffset;
            const parallaxElements = document.querySelectorAll('.float');
            
            parallaxElements.forEach((element, index) => {
                const speed = 0.5 + (index * 0.1);
                element.style.transform = `translateY(${scrolled * speed}px)`;
            });
        });
    }
}

// Initialize scroll animations when page loads
document.addEventListener('DOMContentLoaded', function() {
    new ScrollAnimations();
    new InteractiveEffects();
});